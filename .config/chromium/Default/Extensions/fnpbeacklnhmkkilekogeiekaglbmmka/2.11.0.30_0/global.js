(function(f){(f.NSSS=f.NSSS||{}).chromeGlobal=function(k,a){var e={},h=k.logger,f=a.helperUtils,q=a.uiHelper,l=a.nfmEvents,m=k.utils.isNil,g=k.utils.isntNil,r=a.constants,n=a.webProtection,p=k.localizer,c=k.extensionAdapter;e.THREE_IN_ONE_EXTENSION=!1;e.updatePopoverUI=function(t){c.getActiveTab(function(b){var d=c.getLastError();g(d)?(h.log("Tab is not available"),h.log(d)):(d=f.getSessionIDForTabID(c.getTabID(b)),b=q.uiStatusForSessionID(d,b.url),d=a.main.popoverWindowStrings(),t({popoverStrings:d,
uiStatus:b.uiStatus,showReportSite:b.showReportSite,showFullReport:b.showFullReport}))})};e.downloadURLAnalyzedCallback=function(a,b,d){b=d.getRating();g(b.redirectPage)&&(chrome.downloads.cancel(a),chrome.downloads.removeFile(a),chrome.downloads.erase({id:a}),a=p.getLocalizedString("Malicious Download Detected"),b=p.getLocalizedString("Download Cancelled"),chrome.notifications.create({type:"basic",iconUrl:c.getExtensionURL("content/images/icon-downloadblocked.svg"),title:a,message:b}))};e.initialize=
function(){c.addTabRemovedEventListener(a.main.handleClose);c.addTabActivatedEventListener(a.main.handleActivate);c.addTabUpdatedEventListener(a.main.handleOnUpdated);c.addMessageListener(a.main.handleMessage);n.registerEventCallback(l.PAGE_ANALYZED,a.main.pageAnalyzedCallback);n.registerEventCallback(l.SEARCH_URLS_ANALYZED,a.main.searchURLsAnalyzedCallback);g(chrome.downloads)&&(chrome.downloads.onCreated.addListener(a.main.analyzeDownloadPage),n.registerEventCallback(l.DOWNLOAD_URL_ANALYZED,e.downloadURLAnalyzedCallback));
a.main.handleTelemetryOptOut();chrome.webNavigation.onTabReplaced.addListener(a.main.handleTabReplaced);!0===e.THREE_IN_ONE_EXTENSION&&(a.globalSettings.getValue(r.IS_HP_FIRST_LAUNCH),chrome.webRequest.onBeforeRequest.addListener(a.main.handleOmniSearchEvent,{urls:["https://nortonsafe.search.ask.com/web?omnisearch=yes*"]},["blocking"]))};e.flavorizeExtension=function(){c.getAllTabs(function(a){a.forEach(function(a){if(!1!==f.isLandingPageURL(a.url)){var d=c.getTabID(a);g(d)&&chrome.tabs.executeScript(d,
{file:"ContextInit.js"},function(a){var b=c.getLastError();m(a)||g(b)?h.error("Failed during execute script : ContextInit"):chrome.tabs.executeScript(d,{file:"content/scripts/SymBfwCS.js"},function(a){b=c.getLastError();m(a)||g(b)?h.error("Failed during execute script : SymBfwCS"):chrome.tabs.executeScript(d,{file:"content/scripts/flavorParser.js"},function(a){b=c.getLastError();(m(a)||g(b))&&h.error("Failed during execute script : flavorParser")})})})}})})};e.load=function(){a.init.ready().then(e.initialize,
function(a){h.error(a)})};return e}(f.SymBfw,f.NSSS)})(executionContext);if(SymBfw.utils.isntNil(chrome.runtime.onInstalled))chrome.runtime.onInstalled.addListener(NSSS.main.handleInstall);else{var guid=NSSS.globalSettings.getValue(NSSS.constants.NSSS_INSTALLDATEKEY);SymBfw.utils.isNil(guid)&&setTimeout(function(){NSSS.main.handleInstall({reason:"install"})},5E3)}window.addEventListener("load",function(){NSSS.chromeGlobal.load()});
